define('sealup_search',["component/header","ajaxhelper","utility","validate"],function(e,t,n,r){var i={cities:n.cities,initialize:function(){this.mainBox=$("#i_mainbox"),this.tplfun=_.template($("#i_tpl").html()),this._sendRequest()},_sendRequest:function(){var e={};t.get("http://"+window.frontJSHost+"/ask/props",e,this,this._render,null)},_render:function(e){e.r.push(this.cities),this.mainBox.html(this.tplfun({result:e})),this._registEvent()},_registEvent:function(){$("#i_help").off("click",this._doCall).on("click",{ctx:this},this._doCall),$("#i_pay").off("click",this._pay).on("click",{ctx:this},this._pay)},_doCall:function(){window.location="tel://"+n.phone},_pay:function(e){if(!e.data.ctx.validate())return;var r={userId:n.getUserId(),productId:$("#i_product").data("id"),ownerName:$("#i_name").val(),ownerPhone:$("#i_phone").val(),cityId:$("#i_city").val(),address:$("#i_addr").val(),email:$("#i_email").val()};t.post("http://"+window.frontJSHost+"/order/icreate",r,e.data.ctx,function(r){e.data.ctx.oid=r.r.id;var i={id:r.r.id};t.get("http://"+window.frontJSHost+"/order/pay",i,this,function(e){n.weixinPay(e.r,"question_complete2.html?id="+this.oid)})},null)},validate:function(){var e=!0,t=$("#i_name").val();if(!t)return n.showToast("产权人不能为空"),e=!1,e;var i=$("#i_addr").val();if(!i)return n.showToast("详细地址不能为空"),e=!1,e;var s=$("#i_phone").val();return s?r.isMobile(s)?e:(n.showToast("请输入正确的手机号码"),e=!1,e):(n.showToast("联系电话不能为空"),e=!1,e)}};return i});