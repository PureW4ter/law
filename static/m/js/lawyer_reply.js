define('lawyer_reply',["component/header","ajaxhelper","utility"],function(e,t,n){var r={starLength:15,initialize:function(){this.mainBox=$("#i_mainbox"),this.tplfun=_.template($("#i_tpl").html()),this._sendRequest()},_sendRequest:function(){var e={id:n.getQueryParameter("id")};t.get("http://"+window.frontJSHost+"/order/getreply",e,this,this._render)},_render:function(e){this.mainBox.html(this.tplfun({result:e})),this._registEvent()},_registEvent:function(){$("#i_start_click").off("click",this._setScore).on("click",{ctx:this},this._setScore),$("#i_score_submit").off("click",this._doScore).on("click",{ctx:this},this._doScore)},_setScore:function(e){var t=e.data.ctx;$("#i_star_over").width(Math.ceil(e.offsetX/t.starLength)*t.starLength)},_doScore:function(e){var r=$("#i_star_over").width()/e.data.ctx.starLength;if(r<1){n.showToast("至少评价1星");return}var i={replyId:$("#i_star_over").data("replyid"),score:r};t.get("http://"+window.frontJSHost+"/order/scorereply",i,e.data.ctx,function(){n.showToast("评分成功！",function(){e.data.ctx._sendRequest()})})}};return r});