define(["component/nav_bar","component/header","ajaxhelper","utility"],function(e,t,n,r){var i={currentPage:0,size:30,initialize:function(){e.initialize("i_navbar",2),t.initialize("i_header","文章管理"),this.mainBox=$("#i_mainbox"),this.tplFun=_.template($("#i_tpl").html()),this._sendRequest()},_sendRequest:function(){var e={page:this.currentPage,size:this.size};n.get("http://"+window.frontJSHost+"/api/article/list",e,this,this._render,null)},_render:function(e){this.mainBox.html(this.tplFun({result:e})),this._registEvent()},_registEvent:function(){$("#i_new").off("click",this._createArticle).on("click",this._createArticle),$(".j_delete").off("click",this._doDelete).on("click",this._doDelete)},_createArticle:function(e){window.location="new_article.html"},_doDelete:function(e){var t={id:$(e.currentTarget).data("id")};n.get("http://"+window.frontJSHost+"/api/article/delete",t,this,function(){r.showToast("删除成功",function(){window.refresh()})},null)}};return i});