define(["component/nav_bar","component/header","ajaxhelper","utility"],function(e,t,n,r){var i={initialize:function(){e.initialize("i_navbar",4),t.initialize("i_header","律师管理"),this.mainBox=$("#i_mainbox"),this.tplFun=_.template($("#i_tpl").html()),this._sendRequest()},_sendRequest:function(){var e={page:0,size:30};n.get("http://"+window.frontJSHost+"/api/lawyer/list",e,this,this._render,null)},_render:function(e){this.mainBox.html(this.tplFun({result:e})),this._registEvent()},_registEvent:function(){$(".j_status li").off("click",this._status).on("click",{ctx:this},this._status),$(".j_tasks li").off("click",this._tasks).on("click",{ctx:this},this._tasks),$("#i_new").off("click",this._createLawyer).on("click",this._createLawyer),$(".j_addTask").off("click",this._addTask).on("click",{ctx:this},this._addTask),$("#i_confirm").off("click",this._doAddTask).on("click",{ctx:this},this._doAddTask)},_addTask:function(e){var t=$(e.currentTarget).parents("tr").data("id");$("#i_modal").data({id:t}).modal("show")},_doAddTask:function(e){var t=$("#i_modal").data("id"),i=$(e.currentTarget).parents("tr").data("id"),s={money:$("#i_task").data("value"),id:t};n.get("http://"+window.frontJSHost+"/api/lawyer/addtask",s,e.data.ctx,function(e){r.showToast("新增成功"),this._sendRequest()},null)},_tasks:function(e){var t=$(this).data("value"),n=$(this).text();$(this).closest("ul").prev("button").data("value",t).find("span").eq(0).text(n)},_status:function(e){var t=$(this).data("value"),i=$(this).text(),s=$($(this).parents("tr")).data("id");$(this).closest("ul").prev("button").data("value",t).find("span").eq(0).text(i);var o={id:s,status:t};n.get("http://"+window.frontJSHost+"/api/lawyer/ustatus",o,this,function(){r.showToast("更新成功")})},_createLawyer:function(e){window.location="new_lawyer.html"}};return i});