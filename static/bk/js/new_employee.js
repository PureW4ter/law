define(["component/nav_bar","component/header","ajaxhelper","utility"],function(e,t,n,r){var i={initialize:function(){e.initialize("i_navbar",3),t.initialize("i_header","员工管理"),this.mainBox=$("#i_mainbox"),this.tplFun=_.template($("#i_tpl").html()),this._sendRequest()},_sendRequest:function(){var e={};n.get("http://"+window.frontJSHost+"/api/ossuser/roles",e,this,this._render,null)},_render:function(e){this.mainBox.html(this.tplFun({result:e,cities:r.cities})),this._registEvent()},_registEvent:function(){$("#i_selAuth li").off("click",this._sel).on("click",{ctx:this},this._sel),$("#i_city li").off("click",this._sel).on("click",{ctx:this},this._sel),$("#i_save_btn").off("click",this._doSave).on("click",{ctx:this},this._doSave),$("#i_cancel_btn").off("click",this._doCancel).on("click",{ctx:this},this._doCancel),$("[data-toggle='popover']").off({focus:p_destroy,checkis:input_check}).on({focus:p_destroy,checkis:input_check})},_sel:function(e){var t=$(this).data("value"),n=$(this).text();$(this).closest("ul").parents(".btn-group").data("value",t).find("button").eq(0).text(n)},_doSave:function(e){var t=$("#i_typeForm");$("input,textarea").trigger("checkis");if($(".popover.in").length<1){var i={};i.name=$("#i_name").val(),i.loginName=$("#i_login_name").val(),i.password=$("#i_login_password").val(),i.phoneNum=$("#i_phone").val(),i.cityId=$("#i_city").data("value"),i.role=$("#i_selAuth").data("value"),n.post("http://"+window.frontJSHost+"/api/ossuser/create",i,e.data.ctx,function(){r.showToast("保存成功！",function(){window.location="employee_management.html"})})}},_doCancel:function(e){window.location="employee_management.html"}};return i});